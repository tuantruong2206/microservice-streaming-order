server:
  port: 8090

spring:
  cloud:
    stream:
      instance-count: 2
      instance-index: 1
      function:
        definition: orderCountByUserId;orderVerifiedConsumer  # active 4 processes of kafka stream
      kafka:
        binder:
          configuration:
            commit.interval.ms: 100
            default:
              key.serde: org.apache.kafka.common.serialization.Serdes$StringSerde
              value.serde: org.apache.kafka.common.serialization.Serdes$JsonSerde
          brokers: 10.218.188.198:9092
          autoAddPartitions: true
          minPartitionCount: 4
          replicationFactor: 1
        streams:
          binder:
            configuration:
              application.server: localhost:8091
            functions:
              #            #APPLICATION ID if we have more than one stream app within same springboot
              orderCountByUserId:
                applicationId: order-count-by-user-id-instance
              orderVerifiedConsumer:
                applicationId: order-verified-consumed-instance
            state-store-retry:
              max-attempts: 3
              backoff-period: 2000
      bindings:
        order-print-in:
          destination: orders
          contentType: application/json
        order-verified-in:
          destination: order-verified
          contentType: application/json
#          nativeDecoding: true
#          consumer:
#            keySerde: org.apache.kafka.common.serialization.Serdes$StringSerde
#            valueSerde: org.apache.kafka.common.serialization.Serdes$JsonSerde
        orderVerifiedConsumer-in-0:
          destination: order-verified
          contentType: application/json
        orderCountByUserId-in-0:
          destination: orders-stream
          contentType: application/json




